<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <title>Audio network - physical layer example</title>
        <link rel="stylesheet" type="text/css" href="physical-layer.css">
    </head>
    <body onLoad="onLoad()">

        <div class="main-container">

            <h1 onClick="destroy()">Audio network - physical layer example</h1>

            <h2>Settings/info</h2>
            <div class="container">
                <div>
                    <b>Sample rate [Hz]:</b>
                    <span id="sample-rate"></span>
                </div>
                <div>
                    <label for="symbol-duration">
                        Symbol duration [ms]:
                    </label>
                    <input type="text" id="symbol-duration" value="400" />
                </div>
                <div>
                    <label for="guard-interval">
                        Guard interval [ms]:
                    </label>
                    <input type="text" id="guard-interval" value="200" />
                </div>
                <div>
                    <b>
                        Output [microphone]:
                    </b>
                    <span>
                        <a href="javascript:void(0)" onClick="output('mic', true)">Enable</a>
                        <a href="javascript:void(0)" onClick="output('mic', false)">Disable</a>
                    </span>
                </div>
                <div>
                    <b>
                        Output [recorded audio]:
                    </b>
                    <span>
                        <a href="javascript:void(0)" onClick="output('rec', true)">Enable</a>
                        <a href="javascript:void(0)" onClick="output('rec', false)">Disable</a>
                    </span>
                </div>
                <div>
                    <b>Rx input:</b>
                    <span>
                        <a href="javascript:void(0)" onClick="rxInput('mic')">Microphone</a>
                        <a href="javascript:void(0)" onClick="rxInput('rxLoop')">RxLoopback</a>
                        <a href="javascript:void(0)" onClick="rxInput('rec')">Recorded file</a>
                    </span>
                </div>
                <div>
                    <b>Recorded audio url:</b>
                    <span>
                        <br/>
                        http://codebuild.pl/an.wav
                        <br/>
                        <input type="text" id="recorded-audio-url" value="http://localhost:63342/ucEmu/an.wav" />
                        <br/>
                        <a href="javascript:void(0)" onClick="loadRecordedAudio()">Load</a>
                    </span>
                </div>
            </div>

            <h2>Receive</h2>
            <div class="container">
                <b>Input spectrum:</b>
                <div id="rx-spectrum"></div>

                <b>Channel #0:</b>
                <div class="container-inner">
                    <div>
                        <div>
                            <b>Phase [deg]:</b>
                            <span id="rx-phase-0-0"></span>
                        </div>
                        <div>
                            <b>Power [dB]:</b>
                            <span id="rx-power-0-0"></span>
                        </div>
                        <div>
                            <label for="rx-frequency-change-0-0">Frequency [Hz]:</label>
                            <span>
                                <span id="rx-frequency-0-0"></span>
                                <input type="number" id="rx-frequency-change-0-0" />
                                <a href="javascript:void(0)" onClick="frequencyChange('rx', 0, 0)">Update</a>
                            </span>
                        </div>
                        <div id="rx-constellation-diagram-0-0"></div>
                    </div>
                </div>


                <b>Channel #1:</b>
                <div class="container-inner">
                    <div>
                        <div>
                            <b>Phase [deg]:</b>
                            <span id="rx-phase-1-0"></span>
                        </div>
                        <div>
                            <b>Power [dB]:</b>
                            <span id="rx-power-1-0"></span>
                        </div>
                        <div>
                            <label for="rx-frequency-change-1-0">Frequency [Hz]:</label>
                            <span>
                                <span id="rx-frequency-1-0"></span>
                                <input type="number" id="rx-frequency-change-1-0" />
                                <a href="javascript:void(0)" onClick="frequencyChange('rx', 1, 0)">Update</a>
                            </span>
                        </div>
                        <div id="rx-constellation-diagram-1-0"></div>
                    </div>
                </div>

            </div>

            <h2>Transmit</h2>
            <div class="container">

                <b>Channel #0</b>
                <div class="container-inner">
                    <div>
                        <label for="tx-frequency-change-0-0">Frequency [Hz]:</label>
                        <span>
                            <span id="tx-frequency-0-0"></span>
                            <input type="number" id="tx-frequency-change-0-0" />
                            <a href="javascript:void(0)" onClick="frequencyChange('tx', 0, 0)">Update</a>
                        </span>
                    </div>
                    <div>
                        <a href="javascript:void(0)" onClick="transmit(0, 0.00)">[phase + 0.00]</a> |
                        <a href="javascript:void(0)" onClick="transmit(0, 0.25)">[phase + 0.25]</a> |
                        <a href="javascript:void(0)" onClick="transmit(0, 0.50)">[phase + 0.50]</a> |
                        <a href="javascript:void(0)" onClick="transmit(0, 0.75)">[phase + 0.75]</a> |
                        <br/>
                        <br/>
                        <input type="text" id="tx-sequence-data-0-0" value="0 1 2 3 3 2 1 0" />
                        <input type="number" id="tx-sequence-psk-size-0-0" value="4" />
                        <a href="javascript:void(0)" onClick="transmitSequence(0)">Send sequence</a>
                    </div>
                </div>

                <b>Channel #1</b>
                <div class="container-inner">
                    <div>
                        <label for="tx-frequency-change-1-0">Frequency [Hz]:</label>
                        <span>
                            <span id="tx-frequency-1-0"></span>
                            <input type="number" id="tx-frequency-change-1-0" />
                            <a href="javascript:void(0)" onClick="frequencyChange('tx', 1, 0)">Update</a>
                        </span>
                    </div>
                    <div>
                        <a href="javascript:void(0)" onClick="transmit(1, 0.00)">[phase + 0.00]</a> |
                        <a href="javascript:void(0)" onClick="transmit(1, 0.25)">[phase + 0.25]</a> |
                        <a href="javascript:void(0)" onClick="transmit(1, 0.50)">[phase + 0.50]</a> |
                        <a href="javascript:void(0)" onClick="transmit(1, 0.75)">[phase + 0.75]</a>
                        <br/>
                        <br/>
                        <input type="text" id="tx-sequence-data-1-0" value="7 6 5 4 3 2 1 0" />
                        <input type="number" id="tx-sequence-psk-size-1-0" value="8" />
                        <a href="javascript:void(0)" onClick="transmitSequence(1)">Send sequence</a>
                    </div>
                </div>
            </div>

        </div>

        <!-- audio network BEGIN -->
        <script src="../../src/common/audio-util/audio-util.service.js"></script>
        <script src="../../src/common/queue/queue.factory.js"></script>
        <script src="../../src/common/queue/queue-builder.service.js"></script>
        <script src="../../src/physial-layer/analyser-chart/analyser-chart.factory.js"></script>
        <script src="../../src/physial-layer/audio/audio.service.js"></script>
        <script src="../../src/physial-layer/constellation-diagram/constellation-diagram.factory.js"></script>
        <script src="../../src/physial-layer/carrier-generate/carrier-generate.factory.js"></script>
        <script src="../../src/physial-layer/channel-receive/channel-receive.factory.js"></script>
        <script src="../../src/physial-layer/carrier-recovery/carrier-recovery.factory.js"></script>
        <script src="../../src/physial-layer/channel-transmit/channel-transmit.factory.js"></script>
        <script src="../../src/physial-layer/channel-transmit-manager/channel-transmit-manager.factory.js"></script>
        <script src="../../src/physial-layer/channel-receive-manager/channel-receive-manager.factory.js"></script>
        <script src="../../src/physial-layer/constellation-diagram/constellation-diagram-builder.service.js"></script>
        <script src="../../src/physial-layer/channel-transmit-manager/channel-transmit-manager-builder.service.js"></script>
        <script src="../../src/physial-layer/channel-receive-manager/channel-receive-manager-builder.service.js"></script>
        <script src="../../src/physial-layer/carrier-recovery/carrier-recovery-builder.service.js"></script>
        <script src="../../src/physial-layer/channel-transmit/channel-transmit-builder.service.js"></script>
        <script src="../../src/physial-layer/channel-receive/channel-receive-builder.service.js"></script>
        <script src="../../src/physial-layer/carrier-generate/carrier-generate-builder.service.js"></script>
        <script src="../../src/physial-layer/analyser-chart/analyser-chart-builder.service.js"></script>
        <script src="../../src/physial-layer/audio-network-physical-layer.factory.js"></script>
        <script src="../../src/physial-layer/audio-network-physical-layer-configuration.service.js"></script>
        <!-- audio network END -->

        <script src="physical-layer.js"></script>
    </body>
</html>