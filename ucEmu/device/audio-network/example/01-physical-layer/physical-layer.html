<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <title>Audio network - physical layer example</title>
        <link rel="stylesheet" type="text/css" href="physical-layer.css">
    </head>
    <body onLoad="onLoad()">

        <div class="main-container">

            <h1 onClick="destroy()">Audio network - physical layer example</h1>

            <h2>Settings/info</h2>
            <div class="container">
                <div>
                    <b>Sample rate [Hz]</b>
                    <span id="sample-rate"></span>
                </div>
                <div>
                    <b>Tx buffer size</b>
                    <span id="tx-buffer-size"></span>
                </div>
                <div>
                    <b>Rx buffer size</b>
                    <span id="rx-buffer-size"></span>
                </div>
                <div>
                    <label for="symbol-duration">
                        Symbol duration [ms]
                    </label>
                    <input type="text" id="symbol-duration" value="400" />
                </div>
                <div>
                    <label for="guard-interval">
                        Guard interval [ms]
                    </label>
                    <input type="text" id="guard-interval" value="200" />
                </div>
                <div>
                    <b>
                        Output [tx]
                    </b>
                    <span>
                        <a href="javascript:void(0)" onClick="output('tx', true)">Enable</a>
                        <a href="javascript:void(0)" onClick="output('tx', false)">Disable</a>
                    </span>
                </div>
                <div>
                    <b>
                        Output [microphone]
                    </b>
                    <span>
                        <a href="javascript:void(0)" onClick="output('mic', true)">Enable</a>
                        <a href="javascript:void(0)" onClick="output('mic', false)">Disable</a>
                    </span>
                </div>
                <div>
                    <b>
                        Output [recorded audio]
                    </b>
                    <span>
                        <a href="javascript:void(0)" onClick="output('rec', true)">Enable</a>
                        <a href="javascript:void(0)" onClick="output('rec', false)">Disable</a>
                    </span>
                </div>
                <div>
                    <b>Rx input</b>
                    <span>
                        <a href="javascript:void(0)" onClick="rxInput('mic')">Microphone</a>
                        <a href="javascript:void(0)" onClick="rxInput('rxLoop')">RxLoopback</a>
                        <a href="javascript:void(0)" onClick="rxInput('rec')">Recorded file</a>
                    </span>
                </div>
                <div>
                    <b>Recorded audio url</b>
                    <span>
                        <br/>
                        http://codebuild.pl/an.wav
                        <br/>
                        <input type="text" id="recorded-audio-url" value="http://localhost:63342/ucEmu/an.wav" />
                        <br/>
                        <a href="javascript:void(0)" onClick="loadRecordedAudio()">Load</a>
                    </span>
                </div>
            </div>

            <h2>Receive</h2>
            <div class="container">

                <div class="row">
                    <div class="col-12">
                        <h3>Input spectrum</h3>
                    </div>                    
                </div>
                <div class="row">
                    <div class="col-12">
                        <div id="rx-spectrum"></div>
                    </div>
                </div>

                <div class="row" id="tx-channel-container">

                    <!-- channel begin -->
                    <div class="col tx-channel">
                        <div class="row">
                            <div class="col-12">
                                <h3>Channel #0</h3>
                            </div>
                        </div>
                        <div class="row" id="tx-channel-0-ofdm-container">

                            <!-- ofdm begin -->
                            <div class="col tx-channel-ofdm">
                                <div class="row">
                                    <div class="col-12">
                                        <h4>Channel #0, OFDM #0</h4>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-12">
                                        <div class="rx-constellation-diagram" id="rx-constellation-diagram-0-0"></div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-6">
                                        <b>Phase [deg]</b>
                                    </div>
                                    <div class="col-6">
                                        <span id="rx-phase-0-0"></span>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-6">
                                        <b>Power [dB]</b>
                                    </div>
                                    <div class="col-6">
                                        <span id="rx-power-0-0"></span>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-6">
                                        <label for="rx-frequency-input-0-0">Frequency [Hz]</label>
                                    </div>
                                    <div class="col-6">
                                        <span id="rx-frequency-label-0-0"></span>
                                        <input type="number" id="rx-frequency-input-0-0" />
                                        <a href="javascript:void(0)" onClick="frequencyUpdate('rx', 0, 0)">Update</a>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-6">
                                        <label for="rx-phase-correction-input-0-0">Phase correction</label>
                                    </div>
                                    <div class="col-6">
                                        <span id="rx-phase-correction-label-0-0"></span>
                                        <input type="number" id="rx-phase-correction-input-0-0" />
                                        <a href="javascript:void(0)" onClick="phaseCorrectionUpdate('rx', 0, 0)">Update</a>
                                    </div>
                                </div>
                            </div>
                            <!-- ofdm end -->

                        </div>
                    </div>
                    <!-- channel end -->

                </div>

            </div>

            <h2>Transmit</h2>
            <div class="container">

                <div class="row" id="rx-channel-container">

                    <!-- channel begin -->
                    <div class="col rx-channel">
                        <div class="row">
                            <div class="col-12">
                                <h3>Channel #0</h3>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-6">
                                <b>Send sequence</b>
                            </div>
                            <div class="col-6">
                                <input type="text" id="tx-sequence-data-0" value="0 1 2 3 3 2 1 0" />
                                <input type="number" id="tx-sequence-psk-size-0" value="4" />
                                <a href="javascript:void(0)" onClick="transmitSequence(0)">Send sequence</a>
                            </div>
                        </div>
                        <div class="row" id="rx-channel-0-ofdm-container">

                            <!-- ofdm begin -->
                            <div class="col tx-channel-ofdm">
                                <div class="row">
                                    <div class="col-12">
                                        <h4>Channel #0, OFDM #0</h4>
                                    </div>
                                </div>

                                <div class="row">
                                    <div class="col-6">
                                        <label for="tx-frequency-input-0-0">Frequency [Hz]</label>
                                    </div>
                                    <div class="col-6">
                                        <span id="tx-frequency-label-0-0"></span>
                                        <input type="number" id="tx-frequency-input-0-0" />
                                        <a href="javascript:void(0)" onClick="frequencyUpdate('tx', 0, 0)">Update</a>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-6">
                                        <label for="tx-phase-correction-input-0-0">Phase correction</label>
                                    </div>
                                    <div class="col-6">
                                        <span id="tx-phase-correction-label-0-0"></span>
                                        <input type="number" id="tx-phase-correction-input-0-0" />
                                        <a href="javascript:void(0)" onClick="phaseCorrectionUpdate('tx', 0, 0)">Update</a>
                                    </div>
                                </div>

                                <div class="row">
                                    <div class="col-6">
                                        <b>Send</b>
                                    </div>
                                    <div class="col-6">
                                        <a href="javascript:void(0)" onClick="transmit(0, 0, 0.00)">[phase + 0.00]</a> |
                                        <a href="javascript:void(0)" onClick="transmit(0, 0, 0.25)">[phase + 0.25]</a> |
                                        <a href="javascript:void(0)" onClick="transmit(0, 0, 0.50)">[phase + 0.50]</a> |
                                        <a href="javascript:void(0)" onClick="transmit(0, 0, 0.75)">[phase + 0.75]</a> |
                                    </div>
                                </div>
                            </div>
                            <!-- ofdm end -->

                        </div>
                    </div>
                    <!-- channel end -->

                </div>
            </div>

        </div>

        <!-- audio network BEGIN -->
        <script src="../../src/common/math-util/math-util.service.js"></script>
        <script src="../../src/common/audio-util/audio-util.service.js"></script>
        <script src="../../src/common/queue/queue.factory.js"></script>
        <script src="../../src/common/queue/queue-builder.service.js"></script>
        <script src="../../src/physial-layer/analyser-chart/analyser-chart.factory.js"></script>
        <script src="../../src/physial-layer/audio/audio.service.js"></script>
        <script src="../../src/physial-layer/constellation-diagram/constellation-diagram.factory.js"></script>
        <script src="../../src/physial-layer/carrier-generate/carrier-generate.factory.js"></script>
        <script src="../../src/physial-layer/channel-receive/channel-receive.factory.js"></script>
        <script src="../../src/physial-layer/carrier-recovery/carrier-recovery.factory.js"></script>
        <script src="../../src/physial-layer/channel-transmit/channel-transmit.factory.js"></script>
        <script src="../../src/physial-layer/channel-transmit-manager/channel-transmit-manager.factory.js"></script>
        <script src="../../src/physial-layer/channel-receive-manager/channel-receive-manager.factory.js"></script>
        <script src="../../src/physial-layer/constellation-diagram/constellation-diagram-builder.service.js"></script>
        <script src="../../src/physial-layer/channel-transmit-manager/channel-transmit-manager-builder.service.js"></script>
        <script src="../../src/physial-layer/channel-receive-manager/channel-receive-manager-builder.service.js"></script>
        <script src="../../src/physial-layer/carrier-recovery/carrier-recovery-builder.service.js"></script>
        <script src="../../src/physial-layer/channel-transmit/channel-transmit-builder.service.js"></script>
        <script src="../../src/physial-layer/channel-receive/channel-receive-builder.service.js"></script>
        <script src="../../src/physial-layer/carrier-generate/carrier-generate-builder.service.js"></script>
        <script src="../../src/physial-layer/analyser-chart/analyser-chart-builder.service.js"></script>
        <script src="../../src/physial-layer/audio-network-physical-layer.factory.js"></script>
        <script src="../../src/physial-layer/audio-network-physical-layer-configuration.service.js"></script>
        <!-- audio network END -->

        <script src="physical-layer.js"></script>
    </body>
</html>